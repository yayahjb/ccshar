head	1.1;
access;
symbols;
locks
	root:1.1; strict;
comment	@ * @;


1.1
date	2005.08.03.02.31.07;	author root;	state Exp;
branches;
next	;


desc
@@


1.1
log
@Initial revision
@
text
@/*
**  Return current working directory.  Something for everyone.
*/
/* LINTLIBRARY */
#include "shar.h"
#ifdef	RCSID
static char RCS[] =
	"$Header: lcwd.c,v 2.0 88/05/27 13:26:24 rsalz Exp $";
#endif	/* RCSID */


#ifdef	PWDGETENV
/* ARGSUSED */
char *
Cwd(p, i)
    char	*p;
    int		 i;
{
    char	*q;

    return((q = getenv(PWDGETENV)) ? strcpy(p, q) : NULL);
}
#endif	/* PWDGETENV */


#ifdef	GETWD
/* ARGSUSED1 */
char *
Cwd(p, size)
    char	*p;
    int		 size;
{
    extern char	*getwd();

    return(getwd(p) ? p : NULL);
}
#endif	/* GETWD */


#ifdef	GETCWD
char *
Cwd(p, size)
    char	*p;
    int		 size;
{
    extern char	*getcwd();

    return(getcwd(p, size) ? p : NULL);
}
#endif	/* GETCWD */


#ifdef	PWDPOPEN
char *
Cwd(p, size)
    char	*p;
    int		 size;
{
    extern FILE	*popen();
    FILE	*F;
    int		 i;

    /* This string could be "exec /bin/pwd" if you want... */
    if (F = popen("pwd", "r")) {
	if (fgets(p, size, F) && p[i = strlen(p) - 1] == '\n') {
	    p[i] = '\0';
	    (void)fclose(F);
	    return(p);
	}
	(void)fclose(F);
    }
    return(NULL);
}
#endif	/* PWDPOPEN */
@
